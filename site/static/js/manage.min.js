function _pd(b){b.preventDefault&&b.preventDefault();b.stopPropagation&&b.stopPropagation()}function _ae(b,d,g,f){b.addEventListener(d,g,void 0===f?!1:f)}
var Arrange=function(b){function d(a){a=a.dataTransfer.types;for(var c=0;c<a.length;++c)if("meeid"===a[c])return!0;return!1}function g(a){this.style.opacity="0.4";u=this;a.dataTransfer.effectAllowed="copyMove";a.dataTransfer.setData("meeid",this.getAttribute("data-id"));a.dataTransfer.setData("imgsrc",this.getElementsByTagName("IMG")[0].src)}function f(a){if(d(a))return _pd(a),a.dataTransfer.dropEffect="move",!1}function h(a){if(d(a))return _pd(a),this.classList.add("over"),!1}function p(a){this.classList.remove("over")}
function r(a){_pd(a);if(u!=this){a=document.getElementById(k);var c=a.removeChild(u);a.insertBefore(c,this)}return!1}function t(a){this.style.opacity="1.0";[].forEach.call(m,function(c){c.classList.remove("over")});itmend.classList.remove("over");l=!0}function v(a){l=!0;50>a.clientY&&(l=!1,q(-1));a.clientY>b(window).height()-50&&(l=!1,q(1))}function w(a){1==a.targetTouches.length&&(a=a.targetTouches[0],this.style.left=a.pageX+"px",this.style.top=a.pageY+"px")}var u=null,l=!0,k="",n="",m,q=function(a){var c=
b(window).scrollTop();b(window).scrollTop(c+a);l||setTimeout(function(){q(a)},60)};return{init:function(a,c){k=a;n=c;m=document.querySelectorAll("#"+a+" ."+c);[].forEach.call(m,function(e){_ae(e,"drag",v);_ae(e,"dragstart",g);_ae(e,"dragenter",h);_ae(e,"dragover",f);_ae(e,"dragleave",p);_ae(e,"drop",r);_ae(e,"dragend",t);_ae(e,"touchmove",w)})},iord:function(){m=document.querySelectorAll("#"+k+" ."+n);var a=[];[].forEach.call(m,function(c){(c=c.getAttribute("data-id"))&&a.push(c)});return a.join("|")}}}(jQuery),
AArrange=function(b){function d(a,c,e){a={format:"raw",task:"manage.adjustAlbPaid",aid:a,paid:c};a[Joomla.getOptions("csrf.token","")]=1;b.post(myBaseURL,a,function(x){x&&console.log(x);e(x)})}function g(a){a.target.style.opacity="0.4";l=this;a.dataTransfer.effectAllowed="copyMove";a.dataTransfer.setData("meeid",this.getAttribute("data-id"))}function f(a){a:{var c=a.dataTransfer.types;for(var e=0;e<c.length;++e)if("meeid"===c[e]){c=!0;break a}c=!1}if(c)return _pd(a),a.dataTransfer.dropEffect="move",
!1}function h(a){_pd(a);this.classList.add("over");return!1}function p(a){_pd(a);this.classList.remove("over")}function r(a){_pd(a);l!=this&&(sa=l.getAttribute("data-aid"),da=a.target.getAttribute("data-aid"),d(sa,da,function(c){c?alert(Joomla.JText._("COM_MEEDYA_MOVE_FAIL")):a.target.append(l)}));return!1}function t(a){this.style.opacity="1.0";[].forEach.call(m,function(c){c.classList.remove("over")});n=!0}function v(a){n=!0;50>a.clientY&&(n=!1,q(-1));a.clientY>b(window).height()-50&&(n=!1,q(1))}
function w(a){1==a.targetTouches.length&&(a=a.targetTouches[0],this.style.left=a.pageX+"px",this.style.top=a.pageY+"px")}function u(a){_pd(a);k&&k.classList.remove("slctd");this==k?k=null:(k=this,k.classList.add("slctd"))}var l=null,k=null,n=!0,m,q=function(a){var c=b(window).scrollTop();b(window).scrollTop(c+a);n||setTimeout(function(){q(a)},500)};return{init:function(a,c){m=document.querySelectorAll("#"+a+" ."+c);[].forEach.call(m,function(e){_ae(e,"drag",v);_ae(e,"dragstart",g,!0);_ae(e,"dragenter",
h);_ae(e,"dragover",f);_ae(e,"dragleave",p);_ae(e,"drop",r);_ae(e,"dragend",t);_ae(e,"touchmove",w);_ae(e,"click",u)})},selalb:function(){return k?k.getAttribute("data-aid"):0}}}(jQuery);function setDlgParAlb(){document.getElementById("h5u_palbum").value=AArrange.selalb()}
function allow_group_select_checkboxes(b){var d=null,g=document.querySelectorAll("#"+b+' input[type="checkbox"]');for(b=0;b<g.length;b++)g[b].setAttribute("data-index",b);for(b=0;b<g.length;b++)g[b].addEventListener("click",function(f){if(d&&f.shiftKey){var h=parseInt(d.getAttribute("data-index")),p=parseInt(this.getAttribute("data-index"));f=this.checked;var r=h,t=p;h>p&&(r=p,t=h);for(h=0;h<g.length;h++)r<=h&&h<=t&&(g[h].checked=f)}d=this})}
function handleAlbthmDragOver(b){if(!(0>b.dataTransfer.types.indexOf("imgsrc")))return _pd(b),b.dataTransfer.dropEffect="copy",!1}function handleAlbthmDrop(b){_pd(b);var d=b.dataTransfer.getData("imgsrc");d&&(this.getElementsByTagName("IMG")[0].src=d,document.getElementById("albthmid").value=b.dataTransfer.getData("meeid"));this.style.opacity="1.0"}
function removeAlbThm(){document.getElementById("albthmimg").src="components/com_meedya/static/img/img.png";document.getElementById("albthmid").value=0}function hasSelections(b,d){d=void 0===d?!1:d;if(document.querySelectorAll(b).length)return!0;d&&bootbox.alert(Joomla.JText._("COM_MEEDYA_SELECT_SOME"));return!1}
function deleteSelected(b){b.preventDefault();hasSelections("[name='slctimg[]']:checked",!0)&&bootbox.confirm({message:Joomla.JText._("COM_MEEDYA_PERM_DELETE"),buttons:{confirm:{label:Joomla.JText._("JACTION_DELETE"),className:"btn-danger"},cancel:{label:Joomla.JText._("JCANCEL")}},callback:function(d){d&&(document.adminForm.task.value="manage.deleteItems",document.adminForm.submit())}})}
function removeSelected(b){b.preventDefault();hasSelections("[name='slctimg[]']:checked",!0)&&bootbox.confirm({message:Joomla.JText._("COM_MEEDYA_REMOVE"),buttons:{confirm:{label:Joomla.JText._("COM_MEEDYA_VRB_REMOVE"),className:"btn-primary"},cancel:{label:Joomla.JText._("JCANCEL")}},callback:function(d){if(d){d=document.querySelectorAll("[name='slctimg[]']:checked");for(var g=d[0].parentNode.parentNode,f=0;f<d.length;f++)g.removeChild(d[f].parentNode)}}})}
function selAllImg(b,d){b.preventDefault();var g=d?"checked":"",f=document.adminForm.elements["slctimg[]"];f.length||(f=[f]);for(var h=0;h<f.length;h++)f[h].checked=g}function editSelected(b){b.preventDefault();hasSelections("input[name='slctimg[]']:checked",!0)&&(document.adminForm.task.value="manage.imgsEdit",document.adminForm.submit())}function addSelected(b){b.preventDefault();hasSelections("input[name='slctimg[]']:checked",!0)&&jQuery("#add2albdlg").modal("show")}var blbI=null;
function blbEscape(b){27==b.keyCode&&(b.preventDefault(),blbI.close(function(){document.removeEventListener("keydown",blbEscape)}))}function lboxPimg(b,d){var g=blb_path+b,f=blb_pathV+b;blbI=basicLightbox.create("v"==d?'<video controls><source src="'+f+'"></video>':'<img src="'+g+'">');blbI.show();document.addEventListener("keydown",blbEscape)}function saveAlbum(){document.albForm.thmord.value=Arrange.iord();document.albForm.submit()};