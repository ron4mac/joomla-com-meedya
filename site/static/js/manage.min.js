function _pd(b){b.preventDefault&&b.preventDefault();b.stopPropagation&&b.stopPropagation()}function _ae(b,d,k,f){b.addEventListener(d,k,void 0===f?!1:f)}
var Arrange=function(b){function d(a){a=a.dataTransfer.types;for(var c=0;c<a.length;++c)if("meeid"===a[c])return!0;return!1}function k(a){this.style.opacity="0.4";u=this;a.dataTransfer.effectAllowed="copyMove";a.dataTransfer.setData("meeid",this.getAttribute("data-id"));a.dataTransfer.setData("imgsrc",this.getElementsByTagName("IMG")[0].src)}function f(a){if(d(a))return _pd(a),a.dataTransfer.dropEffect="move",!1}function g(a){if(d(a))return _pd(a),this.classList.add("over"),!1}function m(a){this.classList.remove("over")}
function l(a){_pd(a);if(u!=this){a=document.getElementById(n);var c=a.removeChild(u);a.insertBefore(c,this)}return!1}function h(a){this.style.opacity="1.0";[].forEach.call(q,function(c){c.classList.remove("over")});itmend.classList.remove("over");p=!0}function v(a){p=!0;50>a.clientY&&(p=!1,t(-1));a.clientY>b(window).height()-50&&(p=!1,t(1))}function w(a){1==a.targetTouches.length&&(a=a.targetTouches[0],this.style.left=a.pageX+"px",this.style.top=a.pageY+"px")}var u=null,p=!0,n="",r="",q,t=function(a){var c=
b(window).scrollTop();b(window).scrollTop(c+a);p||setTimeout(function(){t(a)},60)};return{init:function(a,c){n=a;r=c;q=document.querySelectorAll("#"+a+" ."+c);[].forEach.call(q,function(e){_ae(e,"drag",v);_ae(e,"dragstart",k);_ae(e,"dragenter",g);_ae(e,"dragover",f);_ae(e,"dragleave",m);_ae(e,"drop",l);_ae(e,"dragend",h);_ae(e,"touchmove",w)})},iord:function(){q=document.querySelectorAll("#"+n+" ."+r);var a=[];[].forEach.call(q,function(c){(c=c.getAttribute("data-id"))&&a.push(c)});return a.join("|")}}}(jQuery),
AArrange=function(b){function d(a,c,e){a={format:"raw",task:"manage.adjustAlbPaid",aid:a,paid:c};a[Joomla.getOptions("csrf.token","")]=1;b.post(myBaseURL,a,function(x){x&&console.log(x);e(x)})}function k(a){a.target.style.opacity="0.4";p=this;a.dataTransfer.effectAllowed="copyMove";a.dataTransfer.setData("meeid",this.getAttribute("data-id"))}function f(a){a:{var c=a.dataTransfer.types;for(var e=0;e<c.length;++e)if("meeid"===c[e]){c=!0;break a}c=!1}if(c)return _pd(a),a.dataTransfer.dropEffect="move",
!1}function g(a){_pd(a);this.classList.add("over");return!1}function m(a){_pd(a);this.classList.remove("over")}function l(a){_pd(a);p!=this&&(sa=p.getAttribute("data-aid"),da=a.target.getAttribute("data-aid"),d(sa,da,function(c){c?alert(Joomla.JText._("COM_MEEDYA_MOVE_FAIL")):a.target.append(p)}));return!1}function h(a){this.style.opacity="1.0";[].forEach.call(q,function(c){c.classList.remove("over")});r=!0}function v(a){r=!0;50>a.clientY&&(r=!1,t(-1));a.clientY>b(window).height()-50&&(r=!1,t(1))}
function w(a){1==a.targetTouches.length&&(a=a.targetTouches[0],this.style.left=a.pageX+"px",this.style.top=a.pageY+"px")}function u(a){_pd(a);n&&n.classList.remove("slctd");this==n?n=null:(n=this,n.classList.add("slctd"))}var p=null,n=null,r=!0,q,t=function(a){var c=b(window).scrollTop();b(window).scrollTop(c+a);r||setTimeout(function(){t(a)},500)};return{init:function(a,c){q=document.querySelectorAll("#"+a+" ."+c);[].forEach.call(q,function(e){_ae(e,"drag",v);_ae(e,"dragstart",k,!0);_ae(e,"dragenter",
g);_ae(e,"dragover",f);_ae(e,"dragleave",m);_ae(e,"drop",l);_ae(e,"dragend",h);_ae(e,"touchmove",w);_ae(e,"click",u)})},selalb:function(){return n?n.getAttribute("data-aid"):0}}}(jQuery);function setDlgParAlb(){document.getElementById("h5u_palbum").value=AArrange.selalb()}
function allow_group_select_checkboxes(b){var d=null,k=document.querySelectorAll("#"+b+' input[type="checkbox"]');for(b=0;b<k.length;b++)k[b].setAttribute("data-index",b);for(b=0;b<k.length;b++)k[b].addEventListener("click",function(f){if(d&&f.shiftKey){var g=parseInt(d.getAttribute("data-index")),m=parseInt(this.getAttribute("data-index"));f=this.checked;var l=g,h=m;g>m&&(l=m,h=g);for(g=0;g<k.length;g++)l<=g&&g<=h&&(k[g].checked=f)}d=this})}
function handleAlbthmDragOver(b){if(!(0>b.dataTransfer.types.indexOf("imgsrc")))return _pd(b),b.dataTransfer.dropEffect="copy",!1}function handleAlbthmDrop(b){_pd(b);var d=b.dataTransfer.getData("imgsrc");d&&(this.getElementsByTagName("IMG")[0].src=d,document.getElementById("albthmid").value=b.dataTransfer.getData("meeid"));this.style.opacity="1.0"}
function removeAlbThm(){document.getElementById("albthmimg").src="components/com_meedya/static/img/img.png";document.getElementById("albthmid").value=0}function hasSelections(b,d){d=void 0===d?!1:d;if(document.querySelectorAll(b).length)return!0;d&&bootbox.alert(Joomla.JText._("COM_MEEDYA_SELECT_SOME"));return!1}
function deleteSelected(b){b.preventDefault();hasSelections("[name='slctimg[]']:checked",!0)&&bootbox.confirm({message:Joomla.JText._("COM_MEEDYA_PERM_DELETE"),buttons:{confirm:{label:Joomla.JText._("JACTION_DELETE"),className:"btn-danger"},cancel:{label:Joomla.JText._("JCANCEL")}},callback:function(d){d&&(document.adminForm.task.value="manage.deleteItems",document.adminForm.submit())}})}
function removeSelected(b){b.preventDefault();hasSelections("[name='slctimg[]']:checked",!0)&&bootbox.confirm({message:Joomla.JText._("COM_MEEDYA_REMOVE"),buttons:{confirm:{label:Joomla.JText._("COM_MEEDYA_VRB_REMOVE"),className:"btn-primary"},cancel:{label:Joomla.JText._("JCANCEL")}},callback:function(d){if(d){d=document.querySelectorAll("[name='slctimg[]']:checked");for(var k=d[0].parentNode.parentNode,f=0;f<d.length;f++)k.removeChild(d[f].parentNode)}}})}
function selAllImg(b,d){b.preventDefault();var k=d?"checked":"",f=document.adminForm.elements["slctimg[]"];f.length||(f=[f]);for(var g=0;g<f.length;g++)f[g].checked=k}function editSelected(b){b.preventDefault();hasSelections("input[name='slctimg[]']:checked",!0)&&(document.adminForm.task.value="manage.imgsEdit",document.adminForm.submit())}function addSelected(b){b.preventDefault();hasSelections("input[name='slctimg[]']:checked",!0)&&jQuery("#add2albdlg").modal("show")}
function saveAlbum(){document.albForm.thmord.value=Arrange.iord();document.albForm.submit()}
(function(b,d){function k(h){switch(h.charCode){case 32:case 13:case 27:h.preventDefault&&h.preventDefault(),h.stopPropagation&&h.stopPropagation(),g()}}function f(h){switch(h.keyCode){case 32:case 13:case 27:h.preventDefault&&h.preventDefault(),h.stopPropagation&&h.stopPropagation(),g()}}function g(h){console.log(h);document.body.removeChild(m)}var m,l;d.iZoomOpen=function(h){l=document.createElement("div");b.post(iZoomURL,{format:"raw",task:"manage.getZoomItem",iid:h},function(v){l.innerHTML=v+
'<div class="zoom-closex" onclick="iZoomClose(event)">X</div>'});l.className="zoom-area";l.tabIndex="-1";m=document.createElement("div");m.className="zoom-back";m.appendChild(l);document.body.appendChild(m);l.addEventListener("keypress",k,!1);l.addEventListener("keydown",f,!1);l.focus();m.addEventListener("click",g,!1)};d.iZoomClose=g})(jQuery,window);