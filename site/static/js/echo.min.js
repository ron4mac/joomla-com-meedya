/*
 echo-js v1.7.3 | (c) 2016 @toddmotto | https://github.com/toddmotto/echo */
(function(c,m){"function"===typeof define&&define.amd?define(function(){return m(c)}):"object"===typeof exports?module.exports=m:c.echo=m(c)})(this,function(c){var m,q,r,t,h={},n=function(){},d,u,v,p,w,e=function(){if(v||!d)clearTimeout(d),d=setTimeout(function(){h.render();d=null},u)};h.init=function(a){a=a||{};var f=a.offset||0,g=a.offsetVertical||f;f=a.offsetHorizontal||f;w=a.baseUrl||"";m=parseInt(a.offsetTop||g,10);q=parseInt(a.offsetBottom||g,10);r=parseInt(a.offsetLeft||f,10);t=parseInt(a.offsetRight||
f,10);u=parseInt(a.throttle||250,10);v=!1!==a.debounce;p=!!a.unload;n=a.callback||n;h.render();document.addEventListener?(c.addEventListener("scroll",e,!1),c.addEventListener("load",e,!1)):(c.attachEvent("onscroll",e),c.attachEvent("onload",e))};h.render=function(a){a=(a||document).querySelectorAll("[data-echo], [data-echo-background]");for(var f=a.length,g,b,e={l:0-r,t:0-m,b:(c.innerHeight||document.documentElement.clientHeight)+q,r:(c.innerWidth||document.documentElement.clientWidth)+t},d=0;d<f;d++){b=
a[d];var k=b;var l=e;null===k.offsetParent?l=!1:(k=k.getBoundingClientRect(),l=k.right>=l.l&&k.bottom>=l.t&&k.left<=l.r&&k.top<=l.b);l?(p&&b.setAttribute("data-echo-placeholder",b.src),null!==b.getAttribute("data-echo-background")?b.style.backgroundImage="url("+b.getAttribute("data-echo-background")+")":b.src!==(g=w+b.getAttribute("data-echo"))&&(b.src=g),p||(b.removeAttribute("data-echo"),b.removeAttribute("data-echo-background")),n(b,"load")):p&&(g=b.getAttribute("data-echo-placeholder"))&&(null!==
b.getAttribute("data-echo-background")?b.style.backgroundImage="url("+g+")":b.src=g,b.removeAttribute("data-echo-placeholder"),n(b,"unload"))}f||h.detach()};h.detach=function(){document.removeEventListener?c.removeEventListener("scroll",e):c.detachEvent("onscroll",e);clearTimeout(d)};return h});