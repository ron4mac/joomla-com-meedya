/*
 echo-js v1.7.3 | (c) 2016 @toddmotto | https://github.com/toddmotto/echo */
(function(c,l){"function"===typeof define&&define.amd?define(function(){return l(c)}):"object"===typeof exports?module.exports=l:c.echo=l(c)})(this,function(c){var l,r,t,u,f={},n=function(){},g,v,w,p,x,d=function(){if(w||!g)clearTimeout(g),g=setTimeout(function(){f.render();g=null},v)};f.init=function(a){a=a||{};var m=a.offset||0,e=a.offsetVertical||m;m=a.offsetHorizontal||m;x=a.baseUrl||"";l=parseInt(a.offsetTop||e,10);r=parseInt(a.offsetBottom||e,10);t=parseInt(a.offsetLeft||m,10);u=parseInt(a.offsetRight||
m,10);v=parseInt(a.throttle||250,10);w=!1!==a.debounce;p=!!a.unload;n=a.callback||n;f.render();document.addEventListener?(c.addEventListener("scroll",d),c.addEventListener("load",d),window.addEventListener("resize",d)):(c.attachEvent("onscroll",d),c.attachEvent("onload",d),window.attachEvent("resize",d))};f.render=function(a){a=(a||document).querySelectorAll("[data-echo], [data-echo-background]");for(var d=a.length,e,b,g={l:0-t,t:0-l,b:(c.innerHeight||document.documentElement.clientHeight)+r,r:(c.innerWidth||
document.documentElement.clientWidth)+u},q=0;q<d;q++){b=a[q];var h=b;var k=g;null===h.offsetParent?k=!1:(h=h.getBoundingClientRect(),k=h.right>=k.l&&h.bottom>=k.t&&h.left<=k.r&&h.top<=k.b);k?(p&&b.setAttribute("data-echo-placeholder",b.src),null!==b.getAttribute("data-echo-background")?b.style.backgroundImage="url("+b.getAttribute("data-echo-background")+")":b.src!==(e=x+b.getAttribute("data-echo"))&&(b.src=e),p||(b.removeAttribute("data-echo"),b.removeAttribute("data-echo-background")),n(b,"load")):
p&&(e=b.getAttribute("data-echo-placeholder"))&&(null!==b.getAttribute("data-echo-background")?b.style.backgroundImage="url("+e+")":b.src=e,b.removeAttribute("data-echo-placeholder"),n(b,"unload"))}d||f.detach()};f.detach=function(){document.removeEventListener?c.removeEventListener("scroll",d):c.detachEvent("onscroll",d);clearTimeout(g)};return f});